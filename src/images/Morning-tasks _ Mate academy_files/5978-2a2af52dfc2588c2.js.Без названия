(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5978],{490102:function(e,n,t){"use strict";t.d(n,{PS:function(){return i},Qv:function(){return r},ZZ:function(){return l},gQ:function(){return o},y$:function(){return a}});var l="Are you sure you want to delete this item?",i="Item deleted successfully",r="An error occured while deleting the item",o="name",a=1e7},19607:function(e,n,t){"use strict";t.d(n,{DX:function(){return u},Dh:function(){return o},O8:function(){return i},OU:function(){return a},bf:function(){return r}});var l=t(893134),i=function(e,n){return"".concat(e).concat(n)},r=function(e){return"/".concat(e.split("/").filter((function(e){return e})).join("/"),"/")},o=function(e,n){var t=n.split("/"),l=e.split("/").slice(0,-2).join("/");return 1===t.length?"".concat(l,"/").concat(n,"/"):n.replace(l,"/")},a=function(e,n){var t=n||[];return e.children.forEach((function(e){e.type===l.YP.File?t.push(e):a(e,t)})),t},u=function(e){var n=e.folderDepth,t=e.filePath,l=e.folderNameInput,i=e.targetFolderPath,r=t.split("/");return l?(r.splice(n,1,l),r.join("/")):i?i+r.slice(n).join("/"):t}},339457:function(e,n,t){"use strict";t.d(n,{YW:function(){return k},pW:function(){return Z},lf:function(){return H},T3:function(){return B},e4:function(){return a}});var l=t(629815),i=t(785893),r=t(667294),o=t(608151),a=function(){var e=(0,r.useState)(null),n=e[0],t=e[1],i=(0,r.useState)("/"),a=i[0],u=i[1],s=(0,r.useCallback)((function(){t(k.File)}),[t]),c=(0,r.useCallback)((function(){t(k.Folder)}),[t]),d=(0,r.useCallback)((function(){t(null)}),[t]),p=(0,r.useState)(o.LZ),f=p[0],h=p[1],m=(0,r.useCallback)((function(e){h((function(n){return n.includes(e)?n:(0,l.Z)(n).concat([e])}))}),[h]),v=(0,r.useCallback)((function(e){h((function(n){return n.filter((function(n){return n!==e}))}))}),[h]);return{activeFolder:a,setActiveFolder:u,addItemInputVisibility:n,showAddFileInput:s,showAddFolderInput:c,hideAddItemInput:d,emptyFolders:f,createFolder:m,renameEmptyFolder:(0,r.useCallback)((function(e,n){h((function(t){return(0,l.Z)(t.filter((function(n){return n!==e}))).concat([n])}))}),[h]),deleteEmptyFolder:v,setEmptyFolders:h}},u=t(117796),s=t(568579),c=t.n(s),d=t(982866),p=t(583575),f=t(697654),h=t(626042),m=t(269396),v=t(94923),F=function(e){return(0,i.jsxs)(v.s,(0,m.Z)((0,h.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 2H9L11 4H19C20.1 4 21 4.9 21 6V12H16V15H13V18H3C1.9 18 1 17.1 1 16L1.01 4C1.01 2.9 1.9 2 3 2Z",fill:"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 14H18V17H15V19H18V22H20V19H23V17H20V14Z",fill:"currentColor"})]}))},g=t(364400),x=t(584097),C=t(430155),y=function(e){return(0,i.jsx)(v.s,(0,m.Z)((0,h.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.51 3C3.51 1.9 4.4 1 5.5 1H13.5L19.5 7V13.1523L17.5 10.5L11 19H14.5V21H5.49C4.39 21 3.5 20.1 3.5 19L3.51 3ZM16.5 23H18.5V18H20.5L17.5 14L14.5 18H16.5V23ZM12.5 2.5V8H18L12.5 2.5Z",fill:"currentColor"})}))},I=t(233960),_=t(638157),j=t(812525),V=t.n(j),b=(0,r.memo)((function(e){var n=e.onShowAddFileInput,t=e.onShowAddFolderInput,l=e.onDownloadFiles,r=e.onUploadFiles,o=e.onManagerClose,a=(0,x.$G)([C.WY.lmsEditor]).t;return(0,i.jsxs)("div",{className:V().controlsBlock,"data-qa":"controls-block",children:[(0,i.jsxs)("div",{className:V().btnSection,children:[n&&(0,i.jsx)(d.eE,{text:a("".concat(C.WY.lmsEditor,":create-file-tooltip")),className:V().tooltip,widthMode:d.X3.Max,children:(0,i.jsx)(p.zx,{mode:p.qo.TransparentLight,size:p.qE.Small,styling:p.zx.styling.Gray,LeftIcon:f.G,onClick:n,"data-qa":"add-file-button"})}),!!t&&(0,i.jsx)(d.eE,{text:a("".concat(C.WY.lmsEditor,":create-folder-tooltip")),className:V().tooltip,widthMode:d.X3.Max,children:(0,i.jsx)(p.zx,{mode:p.qo.TransparentLight,size:p.qE.Small,styling:p.zx.styling.Gray,LeftIcon:F,onClick:t,dataQa:"add-folder-button"})}),!!r&&(0,i.jsx)(d.eE,{text:a("".concat(C.WY.lmsEditor,":upload-files-tooltip")),className:V().tooltip,widthMode:d.X3.Max,children:(0,i.jsx)(g.j,{styling:p.zx.styling.Gray,Icon:y,mode:p.qo.TransparentLight,size:p.qE.Small,accept:"*/*",multiple:!0,onChange:r})}),!!l&&(0,i.jsx)(d.eE,{text:a("".concat(C.WY.lmsEditor,":download-files-tooltip")),className:V().tooltip,widthMode:d.X3.Max,children:(0,i.jsx)(p.zx,{mode:p.qo.TransparentLight,size:p.qE.Small,styling:p.zx.styling.Gray,LeftIcon:I.D,onClick:l,dataQa:"download-files-button"})})]}),(0,i.jsx)(p.zx,{mode:p.qo.TransparentLight,size:p.qE.Small,styling:p.zx.styling.Gray,LeftIcon:_.D,onClickNoArgs:o,dataQa:"close-file-manager-button"})]})})),w=t(490102);function Z(e){var n=e.files,t=e.onManagerClose,o=e.onOpenFile,s=e.onAddFiles,d=e.onRenameFiles,p=e.onDeleteFile,f=e.onDeleteFiles,h=e.onSaveFile,m=e.onUpload,v=e.onConfirmDelete,F=e.onDownloadFiles,g=e.fileManagerState,x=e.maxFileSizeInBytes,C=void 0===x?w.y$:x,y=e.uploadSizeError,I=e.customFileActions,_=a(),j=g||_,V=j.activeFolder,Z=j.setActiveFolder,k=j.addItemInputVisibility,E=j.showAddFileInput,S=j.showAddFolderInput,L=j.hideAddItemInput,A=j.emptyFolders,R=j.deleteEmptyFolder,H=j.renameEmptyFolder,M=j.setEmptyFolders,P=B(g||_,{onAddFiles:s,onRenameFiles:d,onDeleteFile:p,onDeleteFiles:f,onUpload:m,onOpenFile:o,onConfirmDelete:v,maxFileSizeInBytes:C,uploadSizeError:y,files:n,setEmptyFolders:M}),z=P.handleClick,D=P.handleAddItems,N=P.handleRename,q=P.handleDelete,Y=P.handleDeleteFiles,T=P.handleUploadFiles,W=P.handleRenameFolder,O=(0,r.useMemo)((function(){if(!A)return n;var e=A.map((function(e,n){return{id:-(n+1),path:e}}));return(0,l.Z)(e).concat((0,l.Z)(n))}),[n,A]);return(0,i.jsxs)("div",{className:c().fileManagerWrapper,"data-qa":"file-manager",children:[(0,i.jsx)(b,{onManagerClose:t,onDownloadFiles:F,onUploadFiles:T,onShowAddFileInput:E,onShowAddFolderInput:S}),(0,i.jsx)("div",{className:c().tree,children:(0,i.jsx)(u.mp,{data:O,onClick:z,onAddItem:D,onRenameItem:d&&N,onDeleteItem:p&&q,handleDeleteFiles:f&&Y,activeFolder:V,setActiveFolder:Z,addItemInputVisibility:k,hideAddFileInput:L,onSaveFile:h,handleRenameFolder:W,customFileActions:I,deleteEmptyFolder:R,renameEmptyFolder:H})})]})}t(860401),t(893134),t(794501),t(837403);var k,E=t(546312),S=t(17862),L={right:!0},A={right:{right:0}},R={right:(0,i.jsx)(S.E,{hasUniquePosition:!0})},H=function(e){var n=e.children,t=e.width,l=e.setWidth,o=e.resizableInstance,a=e.minWidth,u=e.maxWidth,s=e.snapSize,c=(0,r.useMemo)((function(){return{width:t,height:"100%"}}),[t]),d=(0,r.useMemo)((function(){return s?{x:[s]}:void 0}),[s]),p=(0,r.useCallback)((function(e,n,t){l("".concat(t.clientWidth,"px"))}),[l]);return(0,i.jsx)(E.e,{ref:o,size:c,minWidth:a,maxWidth:u,enable:L,handleComponent:R,handleStyles:A,snap:d,snapGap:130,onResize:p,children:n})};!function(e){e.File="file",e.Folder="folder"}(k||(k={}));var M=t(147568),P=t(197582),z=t(534145),D=t(19607),N=t(298698),q=t(586347),B=function(e,n){var t=e.addItemInputVisibility,i=e.setActiveFolder,o=e.activeFolder,a=e.createFolder,u=n.onOpenFile,s=n.onAddFiles,c=n.onDeleteFile,d=n.onDeleteFiles,p=n.onRenameFiles,f=n.onUpload,m=n.uploadSizeError,v=n.maxFileSizeInBytes,F=n.onConfirmDelete,g=n.files,x=n.setEmptyFolders,C=(0,z.ZW)(),y=(0,r.useCallback)((function(e){var n=e.map((function(e){return e.node.path}));n[0]&&u(n[0])}),[u]),I=(0,r.useCallback)((function(e){if(s){var n,l;if(t===k.Folder&&a)return e.forEach((function(e){var n=(0,D.bf)(e.updateValues.path);a(n)})),void(i&&(null===(n=e[0])||void 0===n||null===(l=n.updateValues)||void 0===l?void 0:l.path)&&i((0,D.bf)(e[0].updateValues.path)));var r=e.reduce((function(e,n){var t=n.node,l=n.updateValues;return l&&e.push((0,h.Z)({},t,l)),e}),[]);s(r)}}),[s,t,a,i]),_=(0,r.useCallback)((function(e){if(p){var n=e.reduce((function(e,n){var t=n.node,i=n.updateValues;if(i){var r=null===g||void 0===g?void 0:g.map((function(e){return e.path})).filter((function(e){return e===t.url})).length;!r&&x&&x((function(e){return e.includes(t.url)?e:(0,l.Z)(e).concat([t.url])})),t.path!==i.path&&e.push({file:t,newPath:i.path})}return e}),[]);n.length&&p(n)}}),[g,p,x]),j=(0,r.useCallback)(function(){var e=(0,M.Z)((function(e){var n,t;return(0,P.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),e.length&&c?(n=F)?[4,F()]:[3,2]:[2,null];case 1:n=!l.sent(),l.label=2;case 2:return n?[2,null]:(t=e.map((function(e){return e.node.id})),(0,q.Gg)(t[0])&&(0,q.Gg)(e[0])?[4,c(t[0],e[0].node.path)]:[2,null]);case 3:return l.sent(),[2,C.showMessage({type:N.oK.success,text:w.PS})];case 4:return l.sent(),[2,C.showMessage({type:N.oK.error,text:w.Qv})];case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[c,F,C]),V=(0,r.useCallback)(function(){var e=(0,M.Z)((function(e){var n,t,l;return(0,P.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e.length&&d?(n=F)?[4,F()]:[3,2]:[2,null];case 1:n=!i.sent(),i.label=2;case 2:return n?[2,null]:(t=e.map((function(e){return e.node.id})),l=e.map((function(e){return e.node.path})),[4,d(t,l)]);case 3:return i.sent(),[2,C.showMessage({type:N.oK.success,text:w.PS})];case 4:return i.sent(),[2,C.showMessage({type:N.oK.error,text:w.Qv})];case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[F,C,d]),b=(0,r.useCallback)((function(e){if(f){var n=e.target,t=n.validity,i=n.files;if(i){if(i[0]&&i[0].size>v&&m)return void C.showMessage(m);if(i.length&&t){var r=(0,l.Z)(i).map((function(e){return{path:(0,D.O8)(o,e.name),file:e,size:e.size}}));f(r)}}}}),[m,v,f,o,C]),Z=(0,r.useCallback)(function(){var e=(0,M.Z)((function(e,n){var t,l;return(0,P.__generator)(this,(function(i){return p?(t=(0,D.OU)(e),l=t.map((function(t){return{file:t,newPath:(0,D.DX)({filePath:t.path,folderDepth:e.depthLevel,folderNameInput:n})}})),p(l),[2]):[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),[p]);return{handleClick:y,handleAddItems:I,handleRename:_,handleDelete:j,handleDeleteFiles:V,handleUploadFiles:b,handleRenameFolder:Z}}},794501:function(e,n,t){"use strict";t.d(n,{Gx:function(){return u},Wr:function(){return s}});var l=t(999534),i=t(785893),r=t(667294),o=t(586347);var a=(0,r.createContext)({onSetIsFolderOpened:o.Bi,onSetFileRenaming:o.Bi,onClick:o.Bi,isAnyFileLoading:!1,updateRenameInputValue:o.Bi,updateAddInputValue:o.Bi,renameInputValue:"",addInputValue:"",handleRenameFolder:o.PL,handleDeleteFiles:o.PL,deleteEmptyFolder:o.Bi,renameEmptyFolder:o.Bi,isExistingItemNameError:function(){return!1}}),u=function(e){var n=e.children,t=(0,l.Z)(e,["children"]);return(0,i.jsx)(a.Provider,{value:t,children:n})},s=function(){return(0,r.useContext)(a)}},860401:function(e,n,t){"use strict";t.d(n,{p:function(){return ie}});var l=t(414924),i=t(785893),r=t(667294),o=t(449613),a=t(147568),u=t(626042),s=t(269396),c=t(197582),d=t(43703),p=t(655738),f=function(e){var n=(0,r.useRef)(null),t=(0,r.useCallback)((function(t){var l=t.target;e&&n.current&&!n.current.contains(l)&&e()}),[e]);return(0,d.K)(p.m.Escape,e),(0,r.useEffect)((function(){return e?(document.addEventListener("click",t,!0),document.addEventListener("touchstart",t,!0),function(){e&&(document.removeEventListener("click",t,!0),document.removeEventListener("touchstart",t,!0))}):function(){}}),[t,e]),n},h=t(19607),m=t(166303),v=t.n(m),F=function(e){var n,t=e.isFolder,a=e.path,s=e.isActive,c=e.children,d=e.depthLevel,p=e.wrapperRef,f=e.title,h=function(e,n){return(0,r.useMemo)((function(){return e?{paddingLeft:"".concat(20*(n-1)+8,"px")}:{}}),[e,n])}(a,d);return(0,i.jsx)("div",{className:(0,o.cn)((n={},(0,l.Z)(n,v().folder,t),(0,l.Z)(n,v().activeFile,!t&&s),n),v().itemWrapper),style:(0,u.Z)({},h),ref:p,title:f||"","data-qa":"tree-item-wrapper",children:c})},g=t(490102),x=t(584097),C=t(430155),y=t(183684),I=t(354358),_=function(e){var n=e.label,t=e.name,l=e.icon,r=e.value,o=e.onChange,a=e.error,u=(0,x.$G)([C.WY.validates,C.WY.error]).t,s=Boolean(a);return(0,i.jsxs)("div",{"data-qa":"form-field-".concat(t),children:[n&&(0,i.jsxs)("label",{htmlFor:t,children:[n.text,!!l&&l]}),(0,i.jsx)("div",{"data-qa":"input-field-".concat(t),children:(0,i.jsx)(I.a,{className:v().itemInput,required:!0,autoFocus:!0,maxLength:245,id:t,name:t,value:r,onChange:o,"data-qa":"tree-input-field"})}),(0,i.jsx)("div",{className:"input-error","data-qa":"input-error-".concat(t),children:s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.a,{}),(0,i.jsx)("span",{children:u("".concat(C.WY.validates,":").concat(a))})]})})]})},j=t(629815),V=t(64605),b=t(557306),w=t(613654),Z=t(893134),k=[{validator:w.UE,translateCode:"file_name_input_required"},{validator:w.Of,translateCode:"file_name_input_no_spaces"},{validator:w.wU,translateCode:"task_file_name_invalid_symbols"},{validator:(0,w.BS)(255),translateCode:"task_file_folder_name_max_length"}],E=(0,j.Z)(k).concat([{validator:w.y_,translateCode:"file_should_have_extension"}]),S=t(794501),L=function(e){var n=e.onSubmit,t=e.ItemIcon,l=e.itemType,o=e.value,a=e.onChange,u=e.path,s=function(e){var n=(0,x.$G)(C.WY.lmsEditor).t,t=e===Z.YP.File?E:k;return V.A.apply(void 0,(0,j.Z)(t.map((function(e){var t=e.validator,l=e.translateCode;return(0,b.I)(t,n("".concat(C.WY.lmsEditor,":").concat(l)))}))))}(l),c=(0,r.useState)(null),d=c[0],p=c[1],f=(0,S.Wr)().isExistingItemNameError,m=(0,r.useCallback)((function(e){var n=e.target.value;a(n);var t=s(n,{name:n}),l=u&&(0,h.Dh)(u,n),i=f&&f(l||n);p(t||(i?"duplicate name":null))}),[f,a,u,s]),F=(0,r.useCallback)((function(e){d?(p(d),e.preventDefault()):(p(null),n())}),[d,n]);return(0,i.jsxs)("form",{className:v().inputItemWrapper,onSubmit:F,children:[t&&(0,i.jsx)(t,{className:v().folderIcon}),(0,i.jsx)(_,{name:g.gQ,value:o,onChange:m,error:d})]})},A=function(e){var n=e.onSubmit,t=e.itemType,l=e.value,o=e.onChange,a=e.path,u=(0,r.useCallback)((function(){n(l)}),[n,l]);return(0,i.jsx)(L,{itemType:t,onSubmit:u,value:l,onChange:o,path:a})},R=t(339457),H=function(e){var n=e.parentFolderNode,t=(0,S.Wr)(),l=t.addItemInputVisibility,o=t.hideAddFileInput,d=t.onAddItem,p=t.addInputValue,m=t.updateAddInputValue,v=n.path,g=n.depthLevel,x=(0,r.useCallback)((function(){l&&o&&o()}),[l,o]),C=f(x),y=(0,r.useCallback)(function(){var e=(0,a.Z)((function(e){var t;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return d?(t=(0,h.O8)(n.url,e),[4,d([{node:n,updateValues:(0,s.Z)((0,u.Z)({},n),{path:t})}])]):[2];case 1:return l.sent(),o&&o(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[n,d,o]),I=l===R.YW.Folder,_=I?Z.YP.Folder:Z.YP.File;return(0,i.jsx)(F,{isFolder:I,path:v,depthLevel:g+1,wrapperRef:C,isActive:!1,children:(0,i.jsx)(A,{onSubmit:y,itemType:_,value:p,onChange:m})})},M=t(241511),P=t(347636),z=t(134744),D=t(583575),N=t(94923),q=function(e){return(0,i.jsx)(N.s,(0,s.Z)((0,u.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,i.jsx)("path",{d:"M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z",fill:"currentColor"})}))},B=t(80018),Y=function(e){return(0,i.jsx)(N.s,(0,s.Z)((0,u.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,i.jsx)("path",{d:"M9 3V4H4V6H5V19C5 19.5304 5.21071 20.0391 5.58579 20.4142C5.96086 20.7893 6.46957 21 7 21H17C17.5304 21 18.0391 20.7893 18.4142 20.4142C18.7893 20.0391 19 19.5304 19 19V6H20V4H15V3H9ZM7 6H17V19H7V6ZM9 8V17H11V8H9ZM13 8V17H15V8H13Z",fill:"currentColor"})}))},T=function(e){var n=e.node,t=(0,S.Wr)(),l=t.onClick,o=t.onSetFileRenaming,u=t.handleRenameFolder,s=t.renameInputValue,d=t.updateRenameInputValue,p=t.handleDeleteFiles,m=t.deleteEmptyFolder,g=t.renameEmptyFolder,x=(0,r.useCallback)((function(){o(n,!1)}),[o,n]),C=(0,r.useCallback)((function(){o(n,!0)}),[o,n]),y=n.value,I=n.path,_=n.depthLevel,j=n.isActive,V=n.isLoading,b=void 0!==V&&V,w=n.isOpen,k=n.isRenaming,E=void 0!==k&&k,L=w?M.B:P.E,R=(0,r.useCallback)((function(){l(n)}),[n,l]),H=(0,r.useCallback)((function(){E&&x()}),[E,x]),N=f(H),T=(0,h.OU)(n),W=(0,r.useMemo)((function(){return(0,h.Dh)(n.path,s)}),[n.path,s]),O=(0,r.useCallback)(function(){var e=(0,a.Z)((function(e){var t;return(0,c.__generator)(this,(function(l){return x(),!T.length&&g?(t=(0,h.Dh)(n.path,e),g(n.path,t)):u&&u(n,e),[2]}))}));return function(n){return e.apply(this,arguments)}}(),[T.length,u,x,n,g]),U=!T.some((function(e){var n=e.isReadonly,t=e.isEntry;return n||t})),G=(0,r.useCallback)((function(){if(p&&U){var e=T.map((function(e){return{node:e}}));!e.length&&m?m(n.path):p(e)}}),[p,U,T,m,n.path]);return y?(0,i.jsxs)(F,{isFolder:!0,path:I,isActive:j||!1,depthLevel:_,wrapperRef:N,children:[b&&(0,i.jsx)(z.a,{loading:!0}),E?(0,i.jsx)(A,{onSubmit:O,value:s,onChange:d,itemType:Z.YP.Folder,path:W}):(0,i.jsx)(D.zx,{className:v().itemButton,mode:D.qo.TransparentLight,size:D.qE.Small,text:y,LeftIcon:L,onClick:R,"data-qa":"tree-folder-item-button"}),U&&(0,i.jsxs)("div",{className:v().fileControls,children:[!!u&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:E?B.W:q,onClick:E?x:C}),!!p&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:Y,onClick:G,dataQa:"delete-folder-button"})]})]}):null},W=t(187720),O=t(176369),U=t(173549),G=t(666229),Q=t(10253),X=t(309311),K=t(934569),$=function(e,n){var t=(0,Q.Z)((0,X.c)((function(){return{type:Z.YP.TreeItem,collect:function(e){return{isDragging:!!e.isDragging(),item:e.getItem()}},item:e,end:function(e,t){var l=t.getDropResult(),i=function(e,n){var t=(0,Z.zE)(e),l=null===n||void 0===n?void 0:n.path,i=e.url;return t&&l!==i}(e,l),r=null===l||void 0===l?void 0:l.type;if(i&&l&&n){var o=(0,h.O8)(r===Z.YP.Folder?l.path:l.url,e.value);n([{node:e,updateValues:(0,s.Z)((0,u.Z)({},e),{path:o})}])}}}})),2),l=t[0].item,i=t[1],r=(0,Q.Z)((0,K.L)((function(){return{accept:Z.YP.TreeItem,drop:function(n,t){if(!t.didDrop())return e},collect:function(e){return{isOver:!!e.isOver({shallow:!0})}}}}),[e]),2);return{item:l,isOver:r[0].isOver,drag:i,drop:r[1]}};var J=t(675745),ee=t(982866),ne=function(e){var n=e.onClose,t=e.actions,l=e.node,r=f(n);return(0,i.jsx)("ul",{ref:r,className:v().customFileActions,children:t.map((function(e){return(0,i.jsx)("li",{className:v().customFileAction,children:(0,i.jsx)(ee.eE,{text:e.tooltipText?e.tooltipText(l):"",children:(0,i.jsx)(D.zx,{className:v().controlFileActionButton,mode:D.qo.TransparentLight,size:D.qE.Small,text:e.name,onClick:function(){e.onClick(l),n()},renderLeftIcon:e.renderIcon,disabled:!!e.isDisabled&&e.isDisabled(l)})})},e.name)}))})},te=t(795538),le=function(e){var n=e.node,t=(0,S.Wr)(),o=t.onClick,d=t.onRenameItem,p=t.onDelete,m=t.isAnyFileLoading,g=t.onSaveFile,x=t.onSetFileRenaming,C=t.renameInputValue,y=t.updateRenameInputValue,I=t.customFileActions,_=(0,r.useCallback)((function(){x(n,!1)}),[x,n]),j=(0,r.useCallback)((function(){x(n,!0)}),[x,n]),V=(0,r.useState)(!1),b=V[0],w=V[1],k=(0,r.useCallback)((function(){w(!0)}),[]),E=(0,r.useCallback)((function(){w(!1)}),[]),L=n.value,R=n.path,H=n.depthLevel,M=n.isNotSaved,P=n.isReadonly,N=n.isActive,T=n.isEntry,Q=void 0!==T&&T,X=n.isLoading,K=void 0!==X&&X,ee=n.isRenaming,le=void 0!==ee&&ee,ie=$(n,d),re=ie.item,oe=ie.isOver,ae=ie.drag,ue=ie.drop,se=(0,r.useMemo)((function(){return oe&&(null===re||void 0===re?void 0:re.url)!==n.url}),[oe,null===re||void 0===re?void 0:re.url,n.url]),ce=(0,r.useMemo)((function(){return Q||P?null:ae}),[ae,P,Q]),de=(0,r.useCallback)((function(){le&&_()}),[le,_]),pe=f(de),fe=(0,r.useMemo)((function(){return(0,W.L)(R)||te._}),[R]),he=(0,r.useCallback)(function(){var e=(0,a.Z)((function(e){var t;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return _(),d?(t=(0,h.O8)(n.url,e),[4,d([{node:n,updateValues:(0,s.Z)((0,u.Z)({},n),{path:t})}])]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[n,d,_]),me=(0,r.useCallback)((function(){p&&p([{node:n}])}),[n,p]),ve=(0,r.useCallback)((function(){g&&g(R)}),[R,g]),Fe=(0,r.useCallback)((function(){o(n)}),[o,n]);return(0,i.jsx)("div",{ref:ue,"data-qa":"file-manager-tree-file",children:(0,i.jsx)("div",{ref:ce,className:(0,G.cn)((0,l.Z)({},v().targetFolder,se)),children:(0,i.jsx)("div",{ref:ue,children:(0,i.jsxs)(F,{isFolder:!1,path:R,isActive:N||!1,depthLevel:H,wrapperRef:pe,title:L.length>24?L:"",children:[K&&(0,i.jsx)(z.a,{loading:!0}),M&&(0,i.jsx)(O.n,{className:v().iconUnsavedDot}),le?(0,i.jsx)(A,{onSubmit:he,value:C,onChange:y,itemType:Z.YP.File}):(0,i.jsx)(D.zx,{className:v().itemButton,mode:D.qo.TransparentLight,size:D.qE.Small,text:L,LeftIcon:fe,onClick:Fe,"data-qa":"tree-file-item-button"}),!m&&!P&&!Q&&(0,i.jsxs)("div",{className:v().fileControls,children:[!!d&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:le?B.W:q,onClick:le?_:j,dataQa:"rename-file-button"}),!!p&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:Y,onClick:me,dataQa:"delete-file-button"}),!!I&&!!I.length&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:J.n,onClick:k})]}),!!I&&!!I.length&&b&&(0,i.jsx)(ne,{node:n,actions:I,onClose:E}),M&&ve&&(0,i.jsx)(D.zx,{className:v().controlFileBtn,mode:D.qo.TransparentLight,size:D.qE.Small,LeftIcon:U.k,onClick:ve})]})})})})},ie=function(e){var n=e.node,t=(0,S.Wr)(),a=t.addItemInputVisibility,u=t.onRenameItem,s=$(n,u),c=s.item,d=s.isOver,p=s.drop,f=(0,r.useMemo)((function(){return d&&(null===c||void 0===c?void 0:c.url)!==n.url}),[d,null===c||void 0===c?void 0:c.url,n.url]);return(0,i.jsxs)("div",{ref:p,"data-qa":"file-manager-tree-folder",children:[(0,i.jsx)("div",{className:(0,o.cn)((0,l.Z)({},v().targetFolder,f)),children:(0,i.jsx)("div",{ref:p,children:(0,i.jsx)(T,{node:n})})}),(0,i.jsxs)("ul",{className:(0,o.cn)((0,l.Z)({},v().targetFolder,f)),children:[a&&n.isActive&&(0,i.jsx)("li",{children:(0,i.jsx)(H,{parentFolderNode:n})},"add-item-input"),n.isOpen&&n.children.map((function(e){return(0,i.jsxs)("li",{children:[e.type===Z.YP.File&&(0,i.jsx)(le,{node:e}),e.type===Z.YP.Folder&&(0,i.jsx)(ie,{node:e})]},e.path)}))]})]})}},117796:function(e,n,t){"use strict";t.d(n,{mp:function(){return F}});var l=t(10253),i=t(629815),r=t(785893),o=t(667294),a=t(960394),u=t(642043),s=t(860401),c=t(837403),d=t(893134),p=t(943644),f=t(620575),h=t(505950),m=t(794501),v=t(306199),F=function(e){var n=e.data,t=e.activeFolder,F=e.setActiveFolder,g=e.onClick,x=e.onAddItem,C=e.onDeleteItem,y=e.handleDeleteFiles,I=e.onRenameItem,_=e.hideAddFileInput,j=e.addItemInputVisibility,V=e.onSaveFile,b=e.handleRenameFolder,w=e.customFileActions,Z=e.deleteEmptyFolder,k=e.renameEmptyFolder,E=e.shouldBeInitiallyExpanded,S=(0,l.Z)(function(e,n){var t=(0,o.useState)([]),r=t[0],a=t[1],u=(0,f.A)().selectedTaskSlug,s=(0,l.Z)((0,p._)(h.d.fileManagerOpenedFolders(u),r),2),m=s[0],v=s[1],F=(0,o.useMemo)((function(){return(0,c.iV)(e,null,m)}),[e,m]);(0,o.useEffect)((function(){var e=[];(0,c.Dr)(F,(function(t){t.type===d.YP.Folder&&(n||t.isOpen)&&e.push(t.path)})),a(e)}),[]);var g=(0,o.useState)(F),x=g[0],C=g[1];(0,o.useEffect)((function(){var e=(0,c.Af)(F);(0,c.Dr)(e,(function(e){e.type===d.YP.Folder&&(e.isOpen=r.includes(e.path))})),C(e)}),[r,F]);var y=(0,o.useCallback)((function(e,n){a((function(t){var l=t.includes(e);return!0!==n||l?!1===n&&l?t.filter((function(n){return n!==e})):void 0===n?l?t.filter((function(n){return n!==e})):(0,i.Z)(t).concat([e]):t:(0,i.Z)(t).concat([e])}))}),[]);(0,o.useEffect)((function(){r.length>1&&v(r)}),[r,v]);var I=(0,o.useState)(""),_=I[0],j=I[1],V=(0,o.useCallback)((function(e){j(e)}),[]),b=(0,o.useState)(""),w=b[0],Z=b[1],k=(0,o.useCallback)((function(e){Z(e)}),[]),E=(0,o.useCallback)((function(e,n){var t=(0,c.Af)(x);try{var l=(0,c.Pt)(t,(function(n){return n.path===e.path}));if(!l)throw new Error("Node not found");l.isRenaming=n,V(n?l.value:""),C(t)}catch(i){}}),[x,V]);return[x,{renameInputValue:_,addInputValue:w},{onSetIsFolderOpened:y,onSetFileRenaming:E,updateRenameInputValue:V,updateAddInputValue:k}]}(n,E),3),L=S[0],A=S[1],R=A.renameInputValue,H=A.addInputValue,M=S[2],P=M.onSetIsFolderOpened,z=M.onSetFileRenaming,D=M.updateRenameInputValue,N=M.updateAddInputValue,q=(0,o.useCallback)((function(e){var t=e.split("/"),r=(0,l.Z)((0,i.Z)(t).reverse(),1)[0],o=new RegExp("^".concat(e)),a=""!==r&&!e.includes("."),u=""!==t[0];return a&&u?o=new RegExp("^/".concat(e,"/")):a?o=new RegExp("^".concat(e,"/")):u&&(o=new RegExp("^/".concat(e))),n.some((function(e){var n=e.path;return o.test(n)}))}),[n]),B=(0,o.useMemo)((function(){return n.some((function(e){return e.isLoading}))}),[n]),Y=(0,o.useCallback)((function(){_&&(_(),N(""))}),[_,N]),T=function(e,n,t,l){var i=(0,o.useCallback)((function(n){(0,d.zE)(n)&&e&&e([{node:n}])}),[e]);return(0,o.useCallback)((function(e){t&&t(e.url),l&&l(),(0,d.zE)(e)?i(e):n(e.path,!e.isOpen)}),[t,n,i,l])}(g,P,F,Y);return function(e,n,t){var l=(0,v.z)(n);(0,o.useEffect)((function(){!l&&n&&e(t||"",!0)}),[l,n,t,e])}(P,j,t),(0,r.jsx)(a.W,{backend:u.PD,children:(0,r.jsx)(m.Gx,{onSetFileRenaming:z,onClick:T,onAddItem:x,onRenameItem:I,onDelete:C,handleDeleteFiles:y,setActiveFolder:F,addItemInputVisibility:j,hideAddFileInput:Y,onSaveFile:V,isAnyFileLoading:B,onSetIsFolderOpened:P,updateRenameInputValue:D,updateAddInputValue:N,renameInputValue:R,addInputValue:H,handleRenameFolder:b,customFileActions:w,deleteEmptyFolder:Z,renameEmptyFolder:k,isExistingItemNameError:q,children:(0,r.jsx)(s.p,{node:L})})})}},837403:function(e,n,t){"use strict";t.d(n,{Af:function(){return f},Dr:function(){return c},Pt:function(){return d},iV:function(){return a}});var l=t(626042),i=t(269396),r=t(629815),o=t(893134);function a(e,n,t){for(var a=function(a){for(var s=function(e){var n=p.children.find((function(n){return n.type===o.YP.Folder&&n.value===d[e]}));if(n)p=n;else{var l=h(d.slice(0,e+1)),i=h(d.slice(0,e)),a={value:d[e],type:o.YP.Folder,isOpen:(null===t||void 0===t?void 0:t.includes(l))||!1,path:l,pathParts:(0,r.Z)(p.pathParts).concat([d[e]]),url:i,depthLevel:e+1,children:[],isActive:!1};p.children.push(a),p=a}},c=e[a],d=c.path.split("/").filter(Boolean),p=u,f=0;f<d.length-1;f+=1)s(f);var m,v,F,g="/"===(m=c.path)[m.length-1]?o.YP.Folder:o.YP.File,x=g===o.YP.File?h(d.slice(0,-1)):h(d.slice(0)),C=void 0;g===o.YP.Folder?C=(0,i.Z)((0,l.Z)({},c),{isOpen:c.isOpen||!1,pathParts:(0,r.Z)(p.pathParts).concat([d[d.length-1]]),type:o.YP.Folder,value:d[d.length-1],url:x,depthLevel:d.length,children:[],entities:{},isActive:!1}):C=(0,i.Z)((0,l.Z)({},c),{pathParts:(0,r.Z)(p.pathParts).concat([d[d.length-1]]),type:o.YP.File,value:d[d.length-1],url:x,depthLevel:d.length,isReadonly:c.isReadonly||!1,isOpen:(null===n||void 0===n?void 0:n.path)===c.path||null!==(v=c.isOpen)&&void 0!==v&&v,isActive:(null===n||void 0===n?void 0:n.path)===c.path||null!==(F=c.isActive)&&void 0!==F&&F,isRenaming:!1,isNotSaved:c.isNotSaved||!1});p.children.push(C)},u={type:o.YP.Folder,isOpen:!0,value:"",path:"/",pathParts:[""],url:"/",depthLevel:0,children:[],isActive:!0},c=0;c<e.length;c+=1)a(c);return s(u),u}function u(e,n){return e.type===o.YP.File&&n.type===o.YP.Folder?1:e.type===o.YP.Folder&&n.type===o.YP.File?-1:0}function s(e){if(e.type===o.YP.Folder){e.children.sort(u);for(var n=0;n<e.children.length;n+=1)s(e.children[n])}}function c(e,n){n(e),e.type===o.YP.Folder&&e.children.forEach((function(e){return c(e,n)}))}function d(e,n){if(n(e))return e;if(e.type===o.YP.Folder)for(var t=0;t<e.children.length;t+=1){var l=d(e.children[t],n);if(l)return l}return null}function p(e){return e.type===o.YP.Folder?(0,i.Z)((0,l.Z)({},e),{children:e.children.map(p)}):(0,l.Z)({},e)}function f(e){return p(e)}function h(e){return e.length?"/".concat(e.join("/"),"/"):"/"}},172683:function(e,n,t){"use strict";t.d(n,{F:function(){return a}});var l=t(626042),i=t(269396),r=t(785893),o=t(94923),a=function(e){return(0,r.jsx)(o.s,(0,i.Z)((0,l.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,r.jsx)("path",{d:"M20 6H12L10 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6ZM20 18H4V8H20V18Z",fill:"currentColor"})}))}},697654:function(e,n,t){"use strict";t.d(n,{G:function(){return a}});var l=t(626042),i=t(269396),r=t(785893),o=t(94923),a=function(e){return(0,r.jsxs)(o.s,(0,i.Z)((0,l.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.01 3C2.01 1.9 2.9 1 4 1H12L18 7V13H15V16H12V21H3.99C2.89 21 2 20.1 2 19L2.01 3ZM11 2.5V8H16.5L11 2.5Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 15H17V18H14V20H17V23H19V20H22V18H19V15Z",fill:"currentColor"})]}))}},173549:function(e,n,t){"use strict";t.d(n,{k:function(){return a}});var l=t(626042),i=t(269396),r=t(785893),o=t(94923),a=function(e){return(0,r.jsx)(o.s,(0,i.Z)((0,l.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,r.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",d:"M16.7271 2C17.2576 2 17.7663 2.21071 18.1413 2.58579L21.4142 5.85866C21.7893 6.23373 22 6.74244 22 7.27287V21C22 21.5523 21.5523 22 21 22H3C2.44772 22 2 21.5523 2 21V3C2 2.44772 2.44772 2 3 2H16.7271ZM4 4V20H6V13C6 12.4477 6.44772 12 7 12H17C17.5523 12 18 12.4477 18 13V20H20L20 7.27287L16.7271 4H15V8C15 8.55228 14.5523 9 14 9H7C6.44772 9 6 8.55228 6 8V4H4ZM8 4V7H13V4H8ZM16 20H8V14H16V20Z",fill:"currentColor"})}))}},306199:function(e,n,t){"use strict";t.d(n,{z:function(){return i}});var l=t(667294),i=function(e){var n=(0,l.useRef)(null);return(0,l.useEffect)((function(){n.current=e})),n.current}},812525:function(e){e.exports={controlsBlock:"ControlsBlock_controlsBlock__vsaz7",btnSection:"ControlsBlock_btnSection__MuZ6E",tooltip:"ControlsBlock_tooltip__kzQ6l"}},568579:function(e){e.exports={fileManagerWrapper:"FileManager_fileManagerWrapper__DhV5e",tree:"FileManager_tree__LVUt0"}},166303:function(e){e.exports={targetFolder:"TreeStyles_targetFolder__rLZ5Y",itemWrapper:"TreeStyles_itemWrapper__uNW7v",fileControls:"TreeStyles_fileControls__sPgkC",folder:"TreeStyles_folder__ZnZ40",activeFile:"TreeStyles_activeFile__TPisE",itemButton:"TreeStyles_itemButton__QGpsj",folderIcon:"TreeStyles_folderIcon__fJhZU",controlFileBtn:"TreeStyles_controlFileBtn__kReCV",iconUnsavedDot:"TreeStyles_iconUnsavedDot__zIGsj",hidden:"TreeStyles_hidden__RvVzb",itemInput:"TreeStyles_itemInput__44EmC",inputItemWrapper:"TreeStyles_inputItemWrapper__m_PLi",customFileActions:"TreeStyles_customFileActions__Fx6ev",customFileAction:"TreeStyles_customFileAction__t60eh",controlFileActionButton:"TreeStyles_controlFileActionButton__w2bhk"}}}]);
//# sourceMappingURL=https://static.mate.academy/frontend/19564f7f85f845ca2949635ddb37550195fd838b/_next/static/chunks/5978-2a2af52dfc2588c2.js.map